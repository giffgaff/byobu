{"version":3,"sources":["webpack://@fof/byobu/webpack/bootstrap","webpack://@fof/byobu/./forum.js","webpack://@fof/byobu/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@fof/byobu/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/byobu/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/byobu/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/byobu/./src/forum/events/RecipientLeft.js","webpack://@fof/byobu/./src/forum/events/RecipientsModified.js","webpack://@fof/byobu/./src/forum/events/index.js","webpack://@fof/byobu/./src/forum/extend/Discussion.js","webpack://@fof/byobu/./src/forum/extend/SettingsPage.js","webpack://@fof/byobu/./src/forum/extend/User.js","webpack://@fof/byobu/./src/forum/extend/index.js","webpack://@fof/byobu/./src/forum/index.js","webpack://@fof/byobu/./src/forum/modals/AddRecipientModal.js","webpack://@fof/byobu/./src/forum/modals/index.js","webpack://@fof/byobu/./src/forum/notifications/PrivateDiscussionAddedNotification.js","webpack://@fof/byobu/./src/forum/notifications/PrivateDiscussionNotification.js","webpack://@fof/byobu/./src/forum/notifications/PrivateDiscussionReplyNotification.js","webpack://@fof/byobu/./src/forum/notifications/PrivateDiscussionUserLeftNotification.js","webpack://@fof/byobu/./src/forum/notifications/index.js","webpack://@fof/byobu/./src/forum/pages/PrivateComposing.js","webpack://@fof/byobu/./src/forum/pages/PrivateDiscussionsPage.js","webpack://@fof/byobu/./src/forum/pages/PrivateDiscussionsUserPage.js","webpack://@fof/byobu/./src/forum/pages/discussions/PrivateDiscussionComposer.js","webpack://@fof/byobu/./src/forum/pages/discussions/PrivateDiscussionList.js","webpack://@fof/byobu/./src/forum/pages/discussions/index.js","webpack://@fof/byobu/./src/forum/pages/index.js","webpack://@fof/byobu/./src/forum/pages/labels/recipientCountLabel.js","webpack://@fof/byobu/./src/forum/pages/labels/recipientLabel.js","webpack://@fof/byobu/./src/forum/pages/labels/recipientsLabel.js","webpack://@fof/byobu/./src/forum/pages/routes.js","webpack://@fof/byobu/./src/forum/search/RecipientSearch.js","webpack://@fof/byobu/./src/forum/search/sources/UserSearchSource.js","webpack://@fof/byobu/./src/forum/states/PrivateDiscussionListState.js","webpack://@fof/byobu/external \"flarum.core.compat['Model']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Badge']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Button']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/DiscussionComposer']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/DiscussionHero']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/DiscussionList']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/DiscussionListItem']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Dropdown']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/EventPost']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/IndexPage']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/LinkButton']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/LogInModal']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Modal']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Notification']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/NotificationGrid']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Search']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/SessionDropdown']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/SettingsPage']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/Switch']\"","webpack://@fof/byobu/external \"flarum.core.compat['components/UserPage']\"","webpack://@fof/byobu/external \"flarum.core.compat['extend']\"","webpack://@fof/byobu/external \"flarum.core.compat['helpers/avatar']\"","webpack://@fof/byobu/external \"flarum.core.compat['helpers/highlight']\"","webpack://@fof/byobu/external \"flarum.core.compat['helpers/listItems']\"","webpack://@fof/byobu/external \"flarum.core.compat['helpers/username']\"","webpack://@fof/byobu/external \"flarum.core.compat['models/Discussion']\"","webpack://@fof/byobu/external \"flarum.core.compat['models/User']\"","webpack://@fof/byobu/external \"flarum.core.compat['states/DiscussionListState']\"","webpack://@fof/byobu/external \"flarum.core.compat['states/SearchState']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/ItemList']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/Stream']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/UserControls']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/classList']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/extract']\"","webpack://@fof/byobu/external \"flarum.core.compat['utils/extractText']\""],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_extends","assign","arguments","source","hasOwnProperty","call","apply","_inheritsLoose","subClass","superClass","create","constructor","setPrototypeOf","_setPrototypeOf","o","p","__proto__","RecipientLeft","initAttrs","attrs","icon","app","forum","data","attributes","descriptionKey","EventPost","RecipientsModified","diff","diff1","diff2","store","filter","item","indexOf","map","id","getById","content","post","oldRecipients","newRecipients","added","removed","usersAdded","usersRemoved","localeBase","descriptionData","recipientsLabel","link","postComponents","recipientsModified","recipientLeft","badges","index","hero","apiInclude","controls","add","discussion","items","long","recipients","recipientUsers","concat","extend","Discussion","Badge","component","type","label","translator","trans","DiscussionListItem","DiscussionHero","DiscussionPage","params","include","push","DiscussionListState","DiscussionControls","canEditRecipients","Button","onclick","modal","show","AddRecipientModal","find","user","session","ItemList","toArray","forEach","recipient","User","save","relationships","then","history","back","Model","hasMany","oldRecipientUsers","attribute","canEditUserRecipients","privacyToggle","SettingsPage","Switch","state","blocksPd","onchange","value","blocksPdLoading","m","redraw","loading","message","sharedMessageHistory","addToSessionDropdown","SessionDropdown","href","route","username","LinkButton","UserControls","cannotBeDirectMessaged","e","preventDefault","Promise","resolve","PrivateDiscussionComposer","composer","load","titlePlaceholder","submitLabel","UserPage","get","unreadPrivateMessagesCount","initializers","events","pages","notifications","oninit","vnode","selected","Stream","assignInitialRecipients","selectedRecipients","merge","recipientSearch","SearchState","isDismissible","className","title","helpText","RecipientSearch","hide","bind","select","metaKey","ctrlKey","$","submit","onsubmit","current","stream","update","close","Modal","modals","PrivateDiscussionAddedNotification","notification","subject","fromUser","Notification","PrivateDiscussionNotification","PrivateDiscussionReplyNotification","postNumber","PrivateDiscussionUserLeftNotification","notificationComponents","byobuPrivateDiscussionCreated","byobuPrivateDiscussionReplied","PrivateDiscussionRepliedNotification","byobuRecipientRemoved","byobuPrivateDiscussionAdded","grid","NotificationGrid","name","PrivateComposing","action","reject","LogInModal","itemClassName","disabled","canStartDiscussion","canStart","IndexPage","setTitle","q","compose","replace","PrivateDiscussionsUserPage","changeSort","list","PrivateDiscussionListState","sort","refresh","handleChangeSort","loadUser","param","listItems","actionItems","viewItems","composing","sortMap","sortOptions","Dropdown","buttonClassName","keys","active","fields","addDefaultRecipients","users","tags","chooseRecipients","focus","headerItems","remove","recipientCountLabel","getBy","createRecord","cache","discussionList","set","loaded","DiscussionComposer","PrivateDiscussionList","DiscussionList","discussions","routes","PrivateDiscussionsPage","count","style","transChoice","recipientLabel","extract","children","byobuUserPrivate","path","byobuPrivate","oncreate","$search","on","addRecipient","parentNode","clearTimeout","typingTimer","doSearch","setTimeout","view","getValue","setValue","sources","sourceItems","removeRecipient","classList","open","focused","loadingSources","dom","placeholder","extractText","oninput","onfocus","hasFocus","onblur","LoadingIndicator","size","UserSearchSource","values","split","findRecipient","clear","Search","query","byobuResults","page","limit","pushResults","highlight","text","avatar","undefined","results","payload","result"],"mappings":"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CC,OAAR,CAAgB/Q,IAAhB,CAAqBY,GAArB,CAAyB,UAACoQ,MAAD,EAAY;AACjC,UAAI/M,IAAI,GAAGnE,GAAG,CAACU,KAAJ,CAAUM,OAAV,CAAkB,OAAlB,EAA2BkQ,MAAM,CAACnQ,EAAlC,CAAX;;AACAf,SAAG,CAACkN,KAAJ,CAAUsD,YAAV,CAAuB,MAAI,CAACD,KAA5B,EAAmC9M,IAAnC,CAAwCU,IAAxC;AACH,KAHD;AAIA,SAAK2B,OAAL,GAAe,KAAf;AACAF,KAAC,CAACC,MAAF;AACH,G;;;;;;;;;;;;;;;;;;;;;;;AClDL;;IAEqB0F,0B;;;;;;;;EAAmC7H,wE;;;;;;;;;;;;;ACFxD,6C;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,qE;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,qE;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,kE;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,0D;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,yD","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import EventPost from \"flarum/components/EventPost\";\n\nexport default class RecipientLeft extends EventPost {\n    static initAttrs(attrs) {\n        super.initAttrs(attrs);\n    }\n\n    icon() {\n        return app.forum.data.attributes['byobu.icon-postAction'];\n    }\n\n    descriptionKey() {\n        return 'fof-byobu.forum.post.recipients_modified.removed_self';\n    }\n}\n","import EventPost from \"flarum/components/EventPost\";\nimport recipientsLabel from \"../pages/labels/recipientsLabel\";\n\nexport default class RecipientsModified extends EventPost {\n    static initAttrs(attrs) {\n        super.initAttrs(attrs);\n\n        function diff(diff1, diff2, store) {\n            return diff1.filter((item) => diff2.indexOf(item) === -1).map((id) => app.store.getById(store, id));\n        }\n\n        const content = attrs.post.content();\n\n        if (!content['new'] && content.length == 2) {\n            const oldRecipients = attrs.post.content()[0];\n            const newRecipients = attrs.post.content()[1];\n            attrs.added = diff(newRecipients, oldRecipients, 'users');\n            attrs.removed = diff(oldRecipients, newRecipients, 'users');\n        } else {\n            let usersAdded = diff(content['new']['users'], content['old']['users'], 'users');\n            let usersRemoved = diff(content['old']['users'], content['new']['users'], 'users');\n\n            attrs.added = usersAdded;\n            attrs.removed = usersRemoved;\n        }\n    }\n\n    icon() {\n        return app.forum.data.attributes['byobu.icon-postAction'];\n    }\n\n    descriptionKey() {\n        var localeBase = 'fof-byobu.forum.post.recipients_modified.';\n\n        if (this.attrs.added.length) {\n            if (this.attrs.removed.length) {\n                return localeBase + 'added_and_removed';\n            }\n\n            return localeBase + 'added';\n        }\n\n        return localeBase + 'removed';\n    }\n\n    descriptionData() {\n        const data = {};\n\n        if (this.attrs.added.length) {\n            data.added = recipientsLabel(this.attrs.added, { link: true });\n        }\n\n        if (this.attrs.removed.length) {\n            data.removed = recipientsLabel(this.attrs.removed, { link: true });\n        }\n\n        return data;\n    }\n}\n","import RecipientLeft from \"./RecipientLeft\";\nimport RecipientsModified from \"./RecipientsModified\";\n\nexport default (app) => {\n    app.postComponents.recipientsModified = RecipientsModified;\n    app.postComponents.recipientLeft = RecipientLeft;\n}\n","import { extend } from 'flarum/extend';\nimport Model from 'flarum/Model';\nimport Badge from 'flarum/components/Badge';\nimport Discussion from 'flarum/models/Discussion';\nimport User from 'flarum/models/User';\nimport Button from 'flarum/components/Button';\nimport DiscussionListItem from 'flarum/components/DiscussionListItem';\nimport DiscussionPage from 'flarum/components/DiscussionPage';\nimport DiscussionHero from 'flarum/components/DiscussionHero';\nimport DiscussionListState from 'flarum/states/DiscussionListState';\nimport recipientsLabel from '../pages/labels/recipientsLabel';\nimport DiscussionControls from 'flarum/utils/DiscussionControls';\nimport ItemList from 'flarum/utils/ItemList';\nimport AddRecipientModal from './../modals/AddRecipientModal';\n\nexport default (app) => {\n    attributes();\n    badges(app);\n    index();\n    hero();\n    apiInclude();\n    controls();\n}\n\nconst add = function (discussion, items, long) {\n    let recipients = [];\n\n    if (discussion.recipientUsers().length) {\n        recipients = recipients.concat(discussion.recipientUsers());\n    }\n\n    if (recipients && recipients.length) {\n        if (long) {\n            items.add('recipients', recipientsLabel(recipients), 10);\n        } else {\n            items.add('recipients', recipientsLabel(recipients, { link: true }), 4);\n        }\n    }\n};\n\nfunction badges(app) {\n    extend(Discussion.prototype, 'badges', function (badges) {\n        if (this.recipientUsers().length) {\n            badges.add(\n                'private',\n                Badge.component({\n                    type: 'private',\n                    label: app.translator.trans('fof-byobu.forum.badges.is_private.tooltip'),\n                    icon: app.forum.data.attributes['byobu.icon-badge'],\n                }),\n                10\n            );\n        }\n    });\n}\n\nfunction index() {\n    extend(DiscussionListItem.prototype, 'infoItems', function (items) {\n        const discussion = this.attrs.discussion;\n\n        add(discussion, items, true);\n    });\n}\n\nfunction hero() {\n    extend(DiscussionHero.prototype, 'items', function (items) {\n        const discussion = this.attrs.discussion;\n\n        add(discussion, items, false);\n    });\n}\n\nfunction apiInclude() {\n    extend(DiscussionPage.prototype, 'params', function (params) {\n        params.include.push('recipientUsers');\n    });\n    extend(DiscussionListState.prototype, 'requestParams', function (params) {\n        params.include.push('recipientUsers');\n    });\n}\n\nfunction controls() {\n    extend(DiscussionControls, 'moderationControls', function (items, discussion) {\n        if (discussion.canEditRecipients()) {\n            items.add(\n                'recipients',\n                Button.component({\n                    icon: app.forum.data.attributes['byobu.icon-badge'],\n                    onclick: () => app.modal.show(AddRecipientModal, { discussion }),\n                }, app.translator.trans('fof-byobu.forum.buttons.edit_recipients'))\n            );\n        }\n        if (discussion && discussion.recipientUsers().find(user => user.id() === app.session.user.id())) {\n            items.add(\n                'remove',\n                Button.component({\n                    icon: 'fas fa-user-slash',\n                    onclick: () => {\n                        if (discussion) {\n                            let recipients = new ItemList();\n                            discussion.recipientUsers().map((user) => {\n                                if (app.session.user.id() !== user.id()) {\n                                    recipients.add('users:' + user.id(), user);\n                                }\n                            });\n\n                            let recipientUsers = [];\n\n                            recipients.toArray().forEach((recipient) => {\n                                if (recipient instanceof User) {\n                                    recipientUsers.push(recipient);\n                                }\n                            });\n\n                            discussion.save({\n                                relationships: {\n                                    recipientUsers\n                                }\n                            }).then(() => app.history.back());\n                        }\n                    },\n                }, app.translator.trans('fof-byobu.forum.buttons.remove_from_discussion'))\n            );\n        }\n    });\n}\n\nfunction attributes() {\n    Discussion.prototype.recipientUsers = Model.hasMany('recipientUsers');\n    Discussion.prototype.oldRecipientUsers = Model.hasMany('oldRecipientUsers');\n\n    Discussion.prototype.canEditRecipients = Model.attribute('canEditRecipients');\n    Discussion.prototype.canEditUserRecipients = Model.attribute('canEditUserRecipients');\n}\n","import { extend } from 'flarum/extend';\nimport SettingsPage from 'flarum/components/SettingsPage';\nimport Switch from 'flarum/components/Switch';\n\nexport default (app) => {\n    privacyToggle(app);\n}\n\nfunction privacyToggle(app) {\n    extend(SettingsPage.prototype, 'privacyItems', function (items) {\n        items.add(\n            'byobu-block-dm',\n            Switch.component({\n                state: this.user.blocksPd(),\n                onchange: (value) => {\n                    this.blocksPdLoading = true;\n\n                    this.user.save({ blocksPd: value }).then(() => {\n                        this.blocksPdLoading = false;\n                        m.redraw();\n                    });\n                },\n                loading: this.blocksPdLoading\n            }, app.translator.trans('fof-byobu.forum.user.settings.block_pd'))\n        );\n    });\n}\n","import { extend } from 'flarum/extend';\nimport Model from \"flarum/Model\";\nimport User from \"flarum/models/User\";\nimport UserControls from 'flarum/utils/UserControls';\nimport PrivateDiscussionComposer from './../pages/discussions/PrivateDiscussionComposer';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\nimport UserPage from 'flarum/components/UserPage';\nimport LinkButton from 'flarum/components/LinkButton';\nimport SessionDropdown from 'flarum/components/SessionDropdown';\n\nexport default (app) => {\n    attributes();\n    message(app);\n    sharedMessageHistory(app);\n    addToSessionDropdown();\n}\n\nfunction addToSessionDropdown() {\n    extend(SessionDropdown.prototype, 'items', function (items) {\n        if (!app.session.user) return;\n\n        const href = app.route('byobuUserPrivate', { username: app.session.user.username() });\n\n        items.add(\n            'session-pd-link',\n            LinkButton.component({\n                href,\n                icon: app.forum.data.attributes['byobu.icon-badge'],\n            }, app.translator.trans('fof-byobu.forum.user.byobu_link')),\n            85\n        );\n    });\n}\n\nfunction message(app) {\n    extend(UserControls, 'userControls', function (items, user) {\n        if (\n            app.session.user &&\n            app.session.user.id() !== user.id() &&\n            app.forum.attribute('canStartPrivateDiscussion') &&\n            (user.blocksPd() === false || (app.forum.attribute('canStartPrivateDiscussionWithBlockers') && user.cannotBeDirectMessaged()))\n        ) {\n            items.add(\n                'private-discussion',\n                Button.component({\n                    icon: app.forum.data.attributes['byobu.icon-badge'],\n                    onclick: (e) => {\n                        e.preventDefault();\n\n                        return new Promise((resolve) => {\n                            let recipients = new ItemList();\n                            recipients.add('users:' + app.session.user.id(), app.session.user);\n                            recipients.add('users:' + user.id(), user);\n\n                            PrivateDiscussionComposer.prototype.recipients = recipients;\n\n                            app.composer.load(PrivateDiscussionComposer, {\n                                user: app.session.user,\n                                recipients: recipients,\n                                recipientUsers: recipients,\n                                titlePlaceholder: app.translator.trans('fof-byobu.forum.composer_private_discussion.title_placeholder'),\n                                submitLabel: app.translator.trans('fof-byobu.forum.composer_private_discussion.submit_button'),\n                            });\n                            app.composer.show();\n\n                            return resolve(app.composer);\n                        })\n                    },\n                }, app.translator.trans('fof-byobu.forum.buttons.send_pd', { username: user.username() }))\n            );\n        }\n\n        return items;\n    });\n}\n\nfunction sharedMessageHistory(app) {\n    extend(UserPage.prototype, 'navItems', function (items) {\n        const href = app.route('byobuUserPrivate', { username: this.user.username() });\n\n        // Hide links from guests if they are not already on the page\n        if (!app.session.user && m.route.get() !== href) return;\n\n        items.add(\n            'byobu',\n            LinkButton.component({\n                href,\n                icon: app.forum.data.attributes['byobu.icon-badge'],\n            }, app.translator.trans('fof-byobu.forum.user.byobu_link')),\n            85\n        );\n    });\n}\n\nfunction attributes() {\n    User.prototype.blocksPd = Model.attribute('blocksPd');\n    User.prototype.cannotBeDirectMessaged = Model.attribute('cannotBeDirectMessaged');\n    User.prototype.unreadPrivateMessagesCount = Model.attribute('unreadPrivateMessagesCount');\n}\n","import SettingsPage from \"./SettingsPage\";\nimport Discussion from \"./Discussion\";\nimport User from \"./User\";\n\nexport default (app) => {\n    Discussion(app);\n    SettingsPage(app);\n    User(app);\n}\n","import events from './events';\nimport extend from './extend';\nimport pages from './pages';\nimport notifications from './notifications';\n\nexport * from './modals';\nexport * from './pages/discussions';\n\napp.initializers.add('fof-byobu', function (app) {\n    events(app);\n    extend(app);\n\n    pages(app);\n    notifications(app);\n});\n","import Modal from 'flarum/components/Modal';\nimport DiscussionPage from 'flarum/components/DiscussionPage';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\nimport Stream from 'flarum/utils/Stream';\nimport SearchState from 'flarum/states/SearchState';\nimport RecipientSearch from '../search/RecipientSearch';\nimport User from 'flarum/models/User';\n\nexport default class AddRecipientModal extends Modal {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.selected = Stream(new ItemList());\n\n        if (this.attrs.discussion) {\n            // Adds recipients of the currently viewed discussion.\n            this.assignInitialRecipients(this.attrs.discussion);\n        } else if (this.attrs.selectedRecipients && this.attrs.selectedRecipients.toArray().length > 0) {\n            // Adds previously selected recipients.\n            this.selected().merge(this.attrs.selectedRecipients);\n        } else {\n            // Adds the current user in case there are no selected recipients yet and this is a new discussion.\n            this.selected().add('users:' + app.session.user.id(), app.session.user);\n        }\n\n        this.recipientSearch = new SearchState;\n    }\n\n    isDismissible() {\n        return false;\n    }\n\n    assignInitialRecipients(discussion) {\n        discussion.recipientUsers().map((user) => {\n            this.selected().add('users:' + user.id(), user);\n        });\n    }\n\n    className() {\n        return 'AddRecipientModal';\n    }\n\n    title() {\n        return this.attrs.discussion\n            ? app.translator.trans('fof-byobu.forum.modal.titles.update_recipients', { title: <em>{this.attrs.discussion.title()}</em> })\n            : app.translator.trans('fof-byobu.forum.modal.titles.add_recipients');\n    }\n\n    helpText() {\n        return this.attrs.discussion\n            ? app.translator.trans('fof-byobu.forum.modal.help.update_recipients')\n            : app.translator.trans('fof-byobu.forum.modal.help.add_recipients');\n    }\n\n    content() {\n        return [\n            <div className=\"Modal-body\">\n                <div class=\"AddRecipientModal-help\">{this.helpText()}</div>\n                <div className=\"AddRecipientModal-form\">\n                    {RecipientSearch.component({\n                        state: this.recipientSearch,\n                        selected: this.selected,\n                        discussion: this.attrs.discussion,\n                    })}\n                    <div className=\"AddRecipientModal-form-submit App-primaryControl\">\n                        {Button.component({\n                            type: 'submit',\n                            className: 'Button Button--primary',\n                            icon: 'fas fa-check',\n                        }, app.translator.trans('fof-byobu.forum.buttons.submit'))}\n                        {Button.component({\n                            onclick: this.hide.bind(this),\n                            className: 'Button Button--cancel',\n                        }, app.translator.trans('fof-byobu.forum.buttons.cancel'))}\n                    </div>\n                </div>\n            </div>,\n        ];\n    }\n\n    select(e) {\n        // Ctrl + Enter submits the selection, just Enter completes the current entry\n        if (e.metaKey || e.ctrlKey || this.selected.indexOf(this.index) !== -1) {\n            if (this.selected().length) {\n                this.$('form').submit();\n            }\n        }\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        const discussion = this.attrs.discussion;\n        const recipients = this.selected();\n\n        let recipientUsers = [];\n\n        recipients.toArray().forEach((recipient) => {\n            if (recipient instanceof User) {\n                recipientUsers.push(recipient);\n            }\n        });\n\n        // Recipients are updated here for existing discussions here.\n        if (discussion) {\n            discussion.save({ relationships: { recipientUsers } }).then(() => {\n                if (app.current instanceof DiscussionPage) {\n                    app.current.stream.update();\n                }\n                m.redraw();\n            });\n        }\n\n        // Use the onsubmit callback to trigger an update in the DiscussionComposer\n        if (this.attrs.onsubmit) this.attrs.onsubmit(recipients);\n\n        app.modal.close();\n\n        if (! this.attrs.discussion) {\n            app.composer.show();\n        }\n\n        e.redraw = false;\n    }\n}\n","import AddRecipientModal from './AddRecipientModal';\n\nexport const modals = {\n    AddRecipientModal: AddRecipientModal,\n};","import Notification from 'flarum/components/Notification';\n\nexport default class PrivateDiscussionAddedNotification extends Notification {\n    icon() {\n        return app.forum.data.attributes['byobu.icon-badge'];\n    }\n\n    href() {\n        const notification = this.attrs.notification;\n        const discussion = notification.subject();\n\n        return app.route.discussion(discussion);\n    }\n\n    content() {\n        const user = this.attrs.notification.fromUser();\n        return app.translator.trans('fof-byobu.forum.notifications.pd_added_text', {\n            user: user,\n        });\n    }\n}\n","import Notification from 'flarum/components/Notification';\n\nexport default class PrivateDiscussionNotification extends Notification {\n    icon() {\n        return app.forum.data.attributes['byobu.icon-badge'];\n    }\n\n    href() {\n        const notification = this.attrs.notification;\n        const discussion = notification.subject();\n\n        return app.route.discussion(discussion);\n    }\n\n    content() {\n        const user = this.attrs.notification.fromUser();\n        return app.translator.trans('fof-byobu.forum.notifications.pd_text', {\n            user: user,\n        });\n    }\n}\n","import Notification from 'flarum/components/Notification';\n\nexport default class PrivateDiscussionReplyNotification extends Notification {\n    icon() {\n        return 'fas fa-reply';\n    }\n\n    href() {\n        const notification = this.attrs.notification;\n        const discussion = notification.subject();\n        const content = notification.content() || {};\n\n        return app.route.discussion(discussion, content.postNumber);\n    }\n\n    content() {\n        const user = this.attrs.notification.fromUser();\n        return app.translator.trans('fof-byobu.forum.notifications.pd_reply_text', {\n            user: user,\n        });\n    }\n}\n","import Notification from 'flarum/components/Notification';\n\nexport default class PrivateDiscussionUserLeftNotification extends Notification {\n    icon() {\n        return app.forum.data.attributes['byobu.icon-badge'];\n    }\n\n    href() {\n        const notification = this.attrs.notification;\n        const discussion = notification.subject();\n\n        return app.route.discussion(discussion);\n    }\n\n    content() {\n        const user = this.attrs.notification.fromUser();\n        return app.translator.trans('fof-byobu.forum.notifications.pd_user_left_text', {\n            user: user,\n        });\n    }\n}\n","import { extend } from 'flarum/extend';\nimport NotificationGrid from \"flarum/components/NotificationGrid\";\nimport PrivateDiscussionNotification from \"./PrivateDiscussionNotification\";\nimport PrivateDiscussionRepliedNotification from \"./PrivateDiscussionReplyNotification\";\nimport PrivateDiscussionUserLeftNotification from \"./PrivateDiscussionUserLeftNotification\";\nimport PrivateDiscussionAddedNotification from \"./PrivateDiscussionAddedNotification\";\n\nexport default function (app) {\n    app.notificationComponents.byobuPrivateDiscussionCreated = PrivateDiscussionNotification;\n    app.notificationComponents.byobuPrivateDiscussionReplied = PrivateDiscussionRepliedNotification;\n    app.notificationComponents.byobuRecipientRemoved = PrivateDiscussionUserLeftNotification;\n    app.notificationComponents.byobuPrivateDiscussionAdded = PrivateDiscussionAddedNotification;\n\n    grid();\n}\n\nfunction grid() {\n    // Add notification preferences.\n    extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n        items.add('byobuPrivateDiscussionCreated', {\n            name: 'byobuPrivateDiscussionCreated',\n            icon: app.forum.data.attributes['byobu.icon-badge'],\n            label: app.translator.trans('fof-byobu.forum.notifications.pd_label'),\n        });\n        items.add('byobuPrivateDiscussionReplied', {\n            name: 'byobuPrivateDiscussionReplied',\n            icon: app.forum.data.attributes['byobu.icon-badge'],\n            label: app.translator.trans('fof-byobu.forum.notifications.pd_reply_label'),\n        });\n        items.add('byobuPrivateDiscussionAdded', {\n            name: 'byobuPrivateDiscussionAdded',\n            icon: app.forum.data.attributes['byobu.icon-badge'],\n            label: app.translator.trans('fof-byobu.forum.notifications.pd_added_label'),\n        });\n        items.add('byobuRecipientRemoved', {\n            name: 'byobuRecipientRemoved',\n            icon: app.forum.data.attributes['byobu.icon-badge'],\n            label: app.translator.trans('fof-byobu.forum.notifications.pd_user_left_label'),\n        });\n    });\n}\n","\nimport Button from 'flarum/components/Button';\nimport LogInModal from 'flarum/components/LogInModal';\nimport ItemList from 'flarum/utils/ItemList';\nimport PrivateDiscussionComposer from \"./discussions/PrivateDiscussionComposer\";\n\nexport default class PrivateComposing {\n    constructor(recipient) {\n        this.recipient = recipient;\n    }\n\n    action(e) {\n        e.preventDefault();\n\n        return new Promise((resolve, reject) => {\n            if (app.session.user) {\n                let recipients = new ItemList();\n\n                recipients.add('users:' + app.session.user.id(), app.session.user);\n\n                if (this.recipient && app.session.user.id() !== this.recipient.id()) {\n                    recipients.add('users:' + this.recipient.id(), this.recipient);\n                }\n\n                app.composer.load(PrivateDiscussionComposer, {\n                    user: app.session.user,\n                    recipients: recipients,\n                    recipientUsers: recipients,\n                });\n\n                app.composer.show();\n\n                return resolve();\n            } else {\n                app.modal.show(LogInModal);\n\n                return reject();\n            }\n        });\n    }\n\n    component() {\n        return Button.component({\n            icon: 'fas fa-pen',\n            className: 'Button Button--primary IndexPage-newDiscussion',\n            itemClassName: 'fof-byobu_primaryControl',\n            onclick: this.action.bind(this),\n            disabled: ! this.canStartDiscussion,\n        }, app.translator.trans(\n            this.canStartDiscussion ? 'fof-byobu.forum.nav.start_button' : 'core.forum.index.cannot_start_discussion_button'\n        ))\n    }\n\n    get canStartDiscussion() {\n        let canStart = app.session.user && app.forum.attribute('canStartPrivateDiscussion');\n        if (canStart &&  this.recipient) {\n            canStart = !this.recipient.blocksPd();\n        }\n        return canStart;\n    }\n}\n","import { extend } from 'flarum/extend';\nimport LinkButton from 'flarum/components/LinkButton';\nimport IndexPage from 'flarum/components/IndexPage';\nimport DiscussionListState from 'flarum/states/DiscussionListState';\nimport PrivateComposing from \"./PrivateComposing\";\n\nexport default (app) => {\n    extend(IndexPage.prototype, 'navItems', (items) => {\n        const user = app.session.user;\n\n        if (user) {\n            items.add(\n                'privateDiscussions',\n                LinkButton.component({\n                    icon: app.forum.data.attributes['byobu.icon-badge'],\n                    href: app.route('byobuPrivate'),\n                }, app.translator.trans('fof-byobu.forum.nav.nav_item')),\n                75\n            );\n        }\n    });\n\n    extend(IndexPage.prototype, 'setTitle', function () {\n        if (app.current.get('routeName') === 'byobuPrivate') {\n            app.setTitle(app.translator.trans('fof-byobu.forum.user.dropdown_label'));\n        }\n    });\n\n    extend(DiscussionListState.prototype, 'requestParams', function(params) {\n        if (app.current.get('routeName') === 'byobuPrivate') {\n            params.filter.q = (params.filter.q || '') + ' is:private';\n        }\n    });\n\n    extend(IndexPage.prototype, 'sidebarItems', function (items) {\n        if (app.current.get('routeName') === 'byobuPrivate') {\n            let compose = new PrivateComposing;\n\n            items.replace(\n                'newDiscussion',\n                compose.component()\n            );\n        }\n    });\n}\n","import UserPage from 'flarum/components/UserPage';\nimport PrivateDiscussionListState from '../states/PrivateDiscussionListState';\nimport Button from 'flarum/components/Button';\nimport Dropdown from 'flarum/components/Dropdown';\nimport ItemList from 'flarum/utils/ItemList';\nimport listItems from 'flarum/helpers/listItems';\nimport PrivateDiscussionList from './discussions/PrivateDiscussionList';\nimport PrivateComposing from \"./PrivateComposing\";\n\nexport default class PrivateDiscussionsUserPage extends UserPage {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.changeSort('latest');\n    }\n\n    show(user) {\n        // We can not create the list in init because the user will not be available if it has to be loaded asynchronously\n        this.list = new PrivateDiscussionListState({\n                q: `byobu:${user.username()} is:private`,\n                sort: this.sort,\n            });\n\n        this.list.refresh();\n\n        // We call the parent method after creating the list, this way the this.list property\n        // is set before content() is called for the first time\n        super.show(user);\n    }\n\n    handleChangeSort(sort, e) {\n        e.preventDefault();\n\n        this.changeSort(sort);\n    }\n\n    changeSort(sort) {\n        this.sort = sort;\n        this.loadUser(m.route.param('username'));\n    }\n\n    content() {\n        return (\n            <div className=\"DiscussionsUserPage\">\n                <div className=\"DiscussionsUserPage-toolbar\">\n                    <ul className=\"DiscussionsUserPage-toolbar-action\">{listItems(this.actionItems().toArray())}</ul>\n                    <ul className=\"DiscussionsUserPage-toolbar-view\">{listItems(this.viewItems().toArray())}</ul>\n                </div>\n                <PrivateDiscussionList state={this.list}></PrivateDiscussionList>\n            </div>\n        );\n    }\n\n    actionItems() {\n        let composing = new PrivateComposing(this.user);\n\n        const items = new ItemList();\n\n        if (app.session.user && app.forum.attribute('canStartPrivateDiscussion')) {\n            items.add(\n                'start_private',\n                composing.component()\n            );\n        }\n\n        return items;\n    }\n\n    viewItems() {\n        const items = new ItemList();\n        const sortMap = this.list.sortMap();\n\n        const sortOptions = {};\n        for (const i in sortMap) {\n            sortOptions[i] = app.translator.trans('core.forum.index_sort.' + i + '_button');\n        }\n\n        items.add(\n            'sort',\n            Dropdown.component({\n                buttonClassName: 'Button',\n                label: sortOptions[this.sort] || Object.keys(sortMap).map((key) => sortOptions[key])[0],\n            }, Object.keys(sortOptions).map((value) => {\n                const label = sortOptions[value];\n                const active = (this.sort || Object.keys(sortMap)[0]) === value;\n\n                return Button.component({\n                    icon: active ? 'fas fa-check' : true,\n                    onclick: this.handleChangeSort.bind(this, value),\n                    active: active,\n                }, label);\n            }))\n        );\n\n        return items;\n    }\n}\n","import DiscussionComposer from 'flarum/components/DiscussionComposer';\nimport AddRecipientModal from '../../modals/AddRecipientModal';\nimport ItemList from 'flarum/utils/ItemList';\nimport recipientCountLabel from \"../labels/recipientCountLabel\";\nimport User from 'flarum/models/User';\n\nexport default class PrivateDiscussionComposer extends DiscussionComposer {\n    static initAttrs(attrs) {\n        super.initAttrs(attrs);\n\n        attrs.titlePlaceholder = app.translator.trans('fof-byobu.forum.composer_private_discussion.title_placeholder');\n        attrs.submitLabel = app.translator.trans('fof-byobu.forum.composer_private_discussion.submit_button');\n      }\n\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.composer.fields.recipients = this.attrs.recipients || new ItemList();\n\n        this.composer.fields.recipientUsers = this.attrs.recipientUsers || [];\n\n        const username = m.route.param('username');\n\n        if (typeof username !== 'undefined') {\n            this.addDefaultRecipients(username);\n        }\n    }\n\n    data() {\n        let data = super.data();\n\n        const users = [];\n        this.composer.fields.recipients.toArray().forEach((recipient) => {\n            if (recipient instanceof User) {\n                users.push(recipient);\n            }\n        });\n\n        data.relationships = data.relationships || {};\n\n        if (users.length) {\n            data.relationships.recipientUsers = users;\n        }\n\n        delete data.relationships.tags;\n\n        return data;\n    }\n\n    chooseRecipients() {\n        app.modal.show(AddRecipientModal, {\n            selectedRecipients: this.composer.fields.recipients,\n            onsubmit: (recipients) => {\n                this.composer.fields.recipients = recipients;\n\n                // Focus on recipient autocomplete field.\n                this.$('.RecipientsInput').focus();\n            },\n        });\n    }\n\n    headerItems() {\n        let items = super.headerItems();\n\n        items.remove('tags');\n\n        if (app.session.user && app.forum.attribute('canStartPrivateDiscussion')) {\n            const recipients = this.composer.fields.recipients.toArray();\n\n            items.add(\n                'recipients',\n                <a className=\"PrivateDiscussionComposer-changeRecipients\" onclick={this.chooseRecipients.bind(this)}>\n                    {recipients.length ? (\n                        recipientCountLabel(recipients.length)\n                    ) : (\n                        <span className=\"RecipientLabel none\">{app.translator.trans('fof-byobu.forum.buttons.add_recipients')}</span>\n                    )}\n                </a>,\n                5\n            );\n        }\n\n        return items;\n    }\n\n    addDefaultRecipients(username) {\n        const user = app.store.getBy('users', 'username', username);\n\n        this.composer.fields.recipients.add('users:' + app.session.user.id(), app.session.user);\n\n        if (user.id() !== app.session.user.id()) {\n            this.composer.fields.recipients.add('users:' + user.id(), user);\n        }\n    };\n\n    onsubmit() {\n        this.loading = true;\n\n        const recipients = this.composer.fields.recipients.toArray();\n\n        if (recipients.length < 2) {\n            this.chooseRecipients();\n\n            this.loading = false;\n        } else {\n            const data = this.data();\n\n            app.store\n                .createRecord('discussions')\n                .save(data)\n                .then((discussion) => {\n                    if (app.cache.discussionList) {\n                        app.cache.discussionList.refresh();\n                    }\n                    m.route.set(app.route.discussion(discussion));\n\n                    app.composer.hide();\n                }, this.loaded.bind(this));\n        }\n    }\n}\n","import DiscussionList from 'flarum/components/DiscussionList';\n\nexport default class PrivateDiscussionList extends DiscussionList {}\n","import PrivateDiscussionComposer from './PrivateDiscussionComposer';\nimport PrivateDiscussionList from './PrivateDiscussionList';\n\nexport const discussions = {\n    PrivateDiscussionComposer: PrivateDiscussionComposer,\n    PrivateDiscussionList: PrivateDiscussionList\n};\n","import routes from \"./routes\";\nimport PrivateDiscussionsPage from \"./PrivateDiscussionsPage\";\n\nexport default (app) => {\n    routes(app);\n    PrivateDiscussionsPage(app);\n}\n","export default function recipientCountLabel(count, attrs = {}) {\n    attrs.style = attrs.style || {};\n    attrs.className = 'RecipientLabel ' + (attrs.className || '');\n\n    var label = app.translator.transChoice('fof-byobu.forum.labels.recipients', count, { count });\n\n    return m('span', attrs, <span className=\"RecipientLabel-text\">{label}</span>);\n}\n","import extract from 'flarum/utils/extract';\nimport username from 'flarum/helpers/username';\nimport User from 'flarum/models/User';\nimport LinkButton from 'flarum/components/LinkButton';\n\nexport default function recipientLabel(recipient, attrs = {}) {\n    attrs.style = attrs.style || {};\n    attrs.className = 'RecipientLabel ' + (attrs.className || '');\n    attrs.href = extract(attrs, 'link');\n\n    let label;\n\n    if (recipient instanceof User) {\n        label = username(recipient);\n\n        if (attrs.href) {\n            attrs.title = recipient.username() || '';\n            attrs.href = app.route.user(recipient);\n        }\n    } else {\n        attrs.className += ' none';\n        label = app.translator.trans('fof-byobu.forum.labels.user_deleted');\n    }\n\n    return LinkButton.component(attrs, label);\n}\n","import extract from 'flarum/utils/extract';\nimport recipientLabel from './recipientLabel';\n\nexport default function recipientsLabel(recipients, attrs = {}) {\n    const children = [];\n    const link = extract(attrs, 'link');\n\n    attrs.className = 'RecipientsLabel ' + (attrs.className || '');\n\n    if (recipients) {\n        recipients.forEach((recipient) => {\n            children.push(recipientLabel(recipient, { link }));\n        });\n    } else {\n        children.push(recipientLabel());\n    }\n\n    return <span {...attrs}>{children}</span>;\n}\n","import IndexPage from \"flarum/components/IndexPage\";\nimport PrivateDiscussionsUserPage from \"./PrivateDiscussionsUserPage\";\n\nexport default (app) => {\n    app.routes.byobuUserPrivate = { path: '/u/:username/private', component: PrivateDiscussionsUserPage };\n    app.routes.byobuPrivate = {path: '/private', component: IndexPage};\n}\n","import Search from 'flarum/components/Search';\nimport UserSearchSource from './sources/UserSearchSource';\nimport ItemList from 'flarum/utils/ItemList';\nimport classList from 'flarum/utils/classList';\nimport extractText from 'flarum/utils/extractText';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\nimport recipientLabel from '../pages/labels/recipientLabel';\nimport User from 'flarum/models/User';\n\nexport default class RecipientSearch extends Search {\n    oncreate(vnode) {\n        super.oncreate(vnode);\n\n        const $search = this;\n\n        this.$('.Search-results').on('click', (e) => {\n            const target = this.$('.SearchResult.active');\n\n            $search.addRecipient(target.data('index'));\n            $search.$('.RecipientsInput').focus();\n        });\n\n        this.$('.Search-results').on('touchstart', (e) => {\n            const target = this.$(e.target.parentNode);\n\n            $search.addRecipient(target.data('index'));\n            $search.$('.RecipientsInput').focus();\n        });\n\n        $('.RecipientsInput')\n            .on('keyup', () => {\n                clearTimeout(this.typingTimer);\n                this.doSearch = false;\n                this.typingTimer = setTimeout(() => {\n                    this.doSearch = true;\n                    m.redraw();\n                }, 900);\n            })\n            .on('keydown', () => {\n                clearTimeout(this.typingTimer);\n            });\n\n\n        super.oncreate(vnode);\n    }\n\n    view() {\n        if (typeof this.state.getValue() === 'undefined') {\n            this.state.setValue('');\n        }\n\n        const loading = this.state.getValue() && this.state.getValue().length >= 3;\n\n        if (!this.sources) {\n            this.sources = this.sourceItems().toArray();\n        }\n\n        return m(\n            'div',\n            {\n                className: 'AddRecipientModal-form-input',\n            },\n            [\n                m(\n                    'div',\n                    {\n                        className: 'RecipientsInput-selected RecipientsLabel',\n                    },\n                    this.attrs\n                        .selected()\n                        .toArray()\n                        .map((recipient) =>\n                            recipientLabel(recipient, {\n                                onclick: (e) => this.removeRecipient(recipient, e)\n                            })\n                        )\n                ),\n                m('input', {\n                    className:\n                        'RecipientsInput FormControl ' +\n                        classList({\n                            open: !!this.state.getValue(),\n                            focused: !!this.state.getValue(),\n                            active: !!this.state.getValue(),\n                            loading: !!this.loadingSources,\n                        }),\n                    oncreate: function (vnode) {\n                        vnode.dom.focus();\n                    },\n                    type: 'search',\n                    placeholder: extractText(app.translator.trans('fof-byobu.forum.input.search_recipients')),\n                    value: this.state.getValue(),\n                    oninput: e => this.state.setValue(e.target.value),\n                    onfocus: () => (this.hasFocus = true),\n                    onblur: () => (this.hasFocus = false),\n                }),\n                m(\n                    'ul',\n                    {\n                        className:\n                            'Dropdown-menu Search-results fade ' +\n                            classList({\n                                in: !!loading,\n                            }),\n                    },\n                    !this.doSearch\n                        ? LoadingIndicator.component({ size: 'tiny', className: 'Button Button--icon Button--link' })\n                        : this.sources.map((source) => source.view(this.state.getValue()))\n                ),\n            ]\n        );\n    }\n\n    /**\n     * Build an item list of SearchSources.\n     *\n     * @return {ItemList}\n     */\n    sourceItems() {\n        const items = new ItemList();\n\n        // Add user source based on permissions.\n        if (\n            (!this.attrs.discussion && app.forum.attribute('canStartPrivateDiscussionWithUsers')) ||\n            (this.attrs.discussion && this.attrs.discussion.canEditUserRecipients())\n        ) {\n            items.add('users', new UserSearchSource());\n        }\n\n        return items;\n    }\n\n    /**\n     * Adds a recipient.\n     *\n     * @param value\n     */\n    addRecipient(value) {\n        let values = value.split(':'),\n            type = values[0],\n            id = values[1];\n\n        let recipient = this.findRecipient(type, id);\n\n        this.attrs.selected().add(value, recipient);\n\n        this.state.clear();\n    }\n\n    /**\n     * Removes a recipient.\n     *\n     * @param recipient\n     */\n    removeRecipient(recipient, e) {\n        e.preventDefault();\n        this.attrs.selected().remove('users:' + recipient.id());\n    }\n\n    /**\n     * Loads a recipient from the global store.\n     *\n     * @param store\n     * @param id\n     * @returns {Model}\n     */\n    findRecipient(store, id) {\n        return app.store.getById(store, id);\n    }\n}\n","import highlight from 'flarum/helpers/highlight';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\n\nexport default class UserSearchSource {\n    view(query) {\n        if (query.length < 3 || this.loading) return;\n\n        if (!app.cache.byobuResults) {\n            app.cache.byobuResults = [];\n        }\n\n        this.query = query;\n\n        if (!app.cache.byobuResults[this.query]) {\n            this.loading = true;\n\n            app.cache.byobuResults[this.query] = [];\n            app.store\n                .find('users', {\n                    filter: { q: this.query + ' allows-pd' },\n                    page: { limit: 5 },\n                })\n                .then(this.pushResults.bind(this));\n        } else\n            return [\n                <li className=\"Dropdown-header\">{app.translator.trans('core.forum.search.users_heading')}</li>,\n                app.cache.byobuResults[this.query].map((user) => {\n                    const name = username(user);\n                    const children = [highlight(name.text, this.query)];\n\n                    return (\n                        <li className=\"SearchResult\" data-index={'users:' + user.id()}>\n                            <a data-index={'users:' + user.id()}>\n                                {avatar(user)}\n                                {{...name, text: undefined, children}}\n                            </a>\n                        </li>\n                    );\n                }),\n            ];\n    }\n\n    pushResults(results) {\n        results.payload.data.map((result) => {\n            var user = app.store.getById('users', result.id);\n            app.cache.byobuResults[this.query].push(user);\n        });\n        this.loading = false;\n        m.redraw();\n    }\n}\n","import DiscussionListState from 'flarum/states/DiscussionListState';\n\nexport default class PrivateDiscussionListState extends DiscussionListState { }\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Badge'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/DiscussionComposer'];","module.exports = flarum.core.compat['components/DiscussionHero'];","module.exports = flarum.core.compat['components/DiscussionList'];","module.exports = flarum.core.compat['components/DiscussionListItem'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/EventPost'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/LogInModal'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Notification'];","module.exports = flarum.core.compat['components/NotificationGrid'];","module.exports = flarum.core.compat['components/Search'];","module.exports = flarum.core.compat['components/SessionDropdown'];","module.exports = flarum.core.compat['components/SettingsPage'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/highlight'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['states/DiscussionListState'];","module.exports = flarum.core.compat['states/SearchState'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['utils/UserControls'];","module.exports = flarum.core.compat['utils/classList'];","module.exports = flarum.core.compat['utils/extract'];","module.exports = flarum.core.compat['utils/extractText'];"],"sourceRoot":""}